<%-include('../layouts/header')%>
<%-include('../layouts/navbar')%>
<style>
    .form-control {
        border-width: 2px;
        border-style: solid;
        border-color: #bebdbd;
    }
    .form-box {
        max-width: 500px;
        margin: 50px auto;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 10px;
        background: #f9f9f9;
    }
    .form-footer {
        text-align: center;
        margin-top: 20px;
    }
    .btn-outline-primary-2 {
        background: #007bff;
        color: #fff;
        border: none;
    }
    .btn-outline-primary-2:hover {
        background: #0056b3;
    }
    .text-danger {
        font-size: 0.875em;
    }
</style>

<div class="form-box" style="width: 50%;">
    <div class="form-tab">
        <ul class="nav nav-pills nav-fill" role="tablist">
            <li class="nav-item">
                <a class="nav-link" id="signin-tab"  role="tab"  aria-selected="false">Reset Password</a>
            </li>
        </ul>
        <div class="mt-4 mb-2">
            <span>Please make sure your new password must</span><br>
            <span>be diffrend from previous used password.</span>
        </div>
        <div class="tab-content" id="tab-content-5">
            <div class="tab-pane fade show active" id="signin" role="tabpanel" aria-labelledby="register-tab">
                <form action="/verifyRePassword" method="post" onsubmit="return validation()">
                    
                    <div class="form-group">
                        <label for="register-password">New Password *</label>
                        <input type="password" class="form-control" id="register-password" name="password">
                        <span id="errorPassword" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label for="register-cpassword">Confirm Password *</label>
                        <input type="password" class="form-control" id="register-cpassword" name="confirmPassword">
                        <span id="errorConfirmPassword" class="text-danger"></span>
                    </div>
                    <% if (errormsg) { %>
                        <div class="text-center" style="color: red; background: white;">
                            <%= errormsg %>
                        </div>
                    <% } %>
                    <div class="form-footer">
                        <button type="submit" class="btn btn-outline-primary-2">
                            <span>Submit</span>
                            <i class="icon-long-arrow-right"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<script>
    function validation() {
        const password = document.getElementById('register-password').value.trim();
        const confirmPassword = document.getElementById('register-cpassword').value.trim();

        const errorPassword = document.getElementById('errorPassword');
        const errorConfirmpassword = document.getElementById('errorConfirmPassword');

        const passwordRegex = /^.{5,}$/;
        errorPassword.innerText = '';
        errorConfirmpassword.innerText = '';

      

        if (password === "") {
            errorPassword.innerText = "Password cannot be empty";
            return false;
        } else if (!passwordRegex.test(password)) {
            errorPassword.innerText = "Password must be at least 5 characters";
            return false;
        }

        if (confirmPassword === "") {
            errorConfirmpassword.innerText = "Confirm Password cannot be empty";
            return false;
        } else if (password !== confirmPassword) {
            errorConfirmpassword.innerText = "Passwords do not match";
            return false;
        }

        return true;
    }
</script>

    <%-include('../layouts/footbar') %>
<%-include('../layouts/footer') %>